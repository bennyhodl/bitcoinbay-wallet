{"version":3,"sources":["Radio.web.tsx"],"names":["React","memo","forwardRef","Box","Center","usePropsResolution","mergeRefs","useHover","useRadio","VisuallyHidden","RadioContext","useFocusRing","CircleIcon","useHasResponsiveProps","combineContextAndProps","isEmptyObj","extractInObject","stylingProps","useFormControlContext","RadioComponent","icon","inputProps","combinedProps","children","wrapperRef","isHovered","isHoveredProp","isFocusVisible","isFocusVisibleProp","props","ref","isInvalid","isReadOnly","isIndeterminate","disabled","isDisabled","checked","isChecked","_ref","useRef","mergedRefs","focusProps","_interactionBox","_icon","resolvedProps","layoutProps","nonLayoutProps","margin","layout","flexbox","position","sizedIcon","cloneElement","component","transition","Radio","formControlContext","contextState","useContext","inputRef","radioState","accessibilityLabel","state","useMemo","contextCombinedProps","useState","console","error"],"mappings":"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","sourcesContent":["import React, { memo, forwardRef } from 'react';\nimport Box from '../Box';\nimport { Center } from '../../composites/Center';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport type { IRadioProps } from './types';\nimport { mergeRefs } from './../../../utils';\nimport { useHover } from '@react-native-aria/interactions';\nimport { useRadio } from '@react-native-aria/radio';\nimport { VisuallyHidden } from '@react-aria/visually-hidden';\nimport { RadioContext } from './RadioGroup';\nimport { useFocusRing } from '@react-native-aria/focus';\nimport { CircleIcon } from '../Icon/Icons';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\nimport { combineContextAndProps, isEmptyObj } from '../../../utils';\nimport { extractInObject, stylingProps } from '../../../theme/tools/utils';\nimport { useFormControlContext } from '../../composites/FormControl';\n\nconst RadioComponent = memo(\n  forwardRef(\n    (\n      {\n        icon,\n        inputProps,\n        combinedProps,\n        children,\n        wrapperRef,\n        isHovered: isHoveredProp,\n        isFocusVisible: isFocusVisibleProp,\n        ...props\n      }: any,\n      ref: any\n    ) => {\n      const { isInvalid, isReadOnly, isIndeterminate } = combinedProps;\n      const { disabled: isDisabled, checked: isChecked } = inputProps;\n      const _ref = React.useRef(null);\n      const { isHovered } = useHover({}, _ref);\n      const mergedRefs = mergeRefs([_ref, wrapperRef]);\n      const { focusProps, isFocusVisible } = useFocusRing();\n      // const mergedWrapperRef = React.useMemo(() => mergeRefs([wrapperRef, _ref]), []);\n\n      const { _interactionBox, _icon, ...resolvedProps } = usePropsResolution(\n        'Radio',\n        combinedProps,\n        {\n          isInvalid,\n          isReadOnly,\n          isFocusVisible: isFocusVisibleProp || isFocusVisible,\n          isDisabled,\n          isIndeterminate,\n          isChecked,\n          isHovered: isHoveredProp || isHovered,\n        }\n      );\n\n      const [layoutProps, nonLayoutProps] = extractInObject(resolvedProps, [\n        ...stylingProps.margin,\n        ...stylingProps.layout,\n        ...stylingProps.flexbox,\n        ...stylingProps.position,\n        '_text',\n      ]);\n\n      // only calling below function when icon exist.\n      const sizedIcon = () =>\n        //@ts-ignore\n        React.cloneElement(icon, {\n          ..._icon,\n        });\n\n      const component = (\n        <Box\n          flexDirection=\"row\"\n          alignItems=\"center\"\n          {...layoutProps}\n          opacity={isDisabled ? 0.4 : 1}\n          cursor={isDisabled ? 'not-allowed' : 'pointer'}\n        >\n          <Center>\n            {/* Interaction Box */}\n            <Box\n              {..._interactionBox}\n              style={{\n                // @ts-ignore - only for web\"\n                transition: 'height 200ms, width 200ms',\n              }}\n              h={\n                isFocusVisible ||\n                isFocusVisibleProp ||\n                isHovered ||\n                isHoveredProp\n                  ? '200%'\n                  : '100%'\n              }\n              w={\n                isFocusVisible ||\n                isFocusVisibleProp ||\n                isHovered ||\n                isHoveredProp\n                  ? '200%'\n                  : '100%'\n              }\n              pointerEvents=\"none\"\n            />\n            {/* Radio */}\n            <Center {...nonLayoutProps}>\n              {icon && sizedIcon && isChecked ? (\n                sizedIcon()\n              ) : (\n                <CircleIcon {..._icon} opacity={isChecked ? 1 : 0} />\n              )}\n            </Center>\n          </Center>\n          {children}\n        </Box>\n      );\n      //TODO: refactor for responsive prop\n      if (useHasResponsiveProps(props)) {\n        return null;\n      }\n\n      // console.log(inputProps, focusProps, ref);\n      // return null;\n\n      return (\n        <Box\n          // @ts-ignore - RN web supports accessibilityRole=\"label\"\n          accessibilityRole=\"label\"\n          ref={mergedRefs}\n        >\n          <VisuallyHidden>\n            <input {...inputProps} {...focusProps} ref={ref} />\n          </VisuallyHidden>\n          {component}\n        </Box>\n      );\n    }\n  )\n);\n\nconst Radio = (\n  {\n    icon,\n    children,\n    wrapperRef,\n    isHovered: isHoveredProp,\n    isFocusVisible: isFocusVisibleProp,\n    ...props\n  }: IRadioProps,\n  ref: any\n) => {\n  const formControlContext = useFormControlContext();\n  const contextState = React.useContext(RadioContext);\n\n  const combinedProps = combineContextAndProps(\n    { ...formControlContext, ...contextState },\n    props\n  );\n\n  const inputRef = React.useRef(null);\n  const radioState = useRadio(\n    { ...combinedProps, 'aria-label': props.accessibilityLabel, children },\n    contextState.state ?? {},\n    inputRef\n  );\n\n  // console.log('radio', radioState);\n  //@ts-ignore\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const inputProps = React.useMemo(() => radioState.inputProps, [\n    radioState.inputProps.checked,\n    radioState.inputProps.disabled,\n  ]);\n\n  const [contextCombinedProps] = React.useState({\n    ...combinedProps,\n  });\n\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n  if (isEmptyObj(contextState)) {\n    console.error('Error: Radio must be wrapped inside a Radio.Group');\n    return <></>;\n  }\n\n  return (\n    <RadioComponent\n      inputProps={inputProps}\n      combinedProps={contextCombinedProps}\n      children={children}\n      ref={ref}\n      icon={icon}\n      wrapperRef={wrapperRef}\n      isHovered={isHoveredProp}\n      isFocusVisible={isFocusVisibleProp}\n    />\n  );\n};\n\nexport default memo(forwardRef(Radio));\n"]}